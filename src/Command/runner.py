#how to run semaphore using a message object (kinda like the demo file) 